[![standard-readme compliant](https://img.shields.io/badge/readme%20style-standard-brightgreen.svg?style=flat-square)](https://github.com/RichardLitt/standard-readme)
# DeepScenario: An Open Driving Scenario Dataset for Autonomous Driving System Testing

> **Dataset avaliability** - To facilitate reviewing *DeepScenario* dataset, reviewers please refer to the corresponding data in this repository. We also plan to release the dataset in permanent repositories like Zenodo once it gets accepted.<br/>

This repoisitory contains:

1. **[deepscenario-dataset](https://github.com/Simula-COMPLEX/DeepScenario/tree/main/deepscenario-dataset)** - DeepScenario dataset, which includes driving scenarios generated by executing three scenario generation strategies: *Reinforcement Learning (RL)-based Strategy*, *Random-based Strategy*, *Greedy-based Strategy*;
2. **[deepscenario-toolset](https://github.com/Simula-COMPLEX/DeepScenario/tree/main/deepscenario-toolset)** - The toolset for *DeepScenario* dataset, including *ScenarioCollector* that can automatically collect driving scenarios, and *ScenarioRunner* that can support replaying driving scenarios.

## Table of Contents
- [Contributions](#contributions)
- [DeepScenario Dataset Description](#deepscenario-dataset-description)
  - [Dataset Structure](#dataset-structure)
  - [Usage](#usage)
- [Related Efforts](#related-efforts)
- [Paper](#paper)
- [Maintainers](#maintainers)

## Contributions
With the rapid development of autonomous driving systems (ADSs), testing ADSs under various driving conditions has become a key method to ensure the successful deployment of ADS in the real-world. However, it is impossible to test all the scenarios due to the inherent complexity and uncertainty of ADSs and the driving tasks. Further, testing of ADSs is expensive regarding time and computational resources. Therefore, a large-scale driving scenario dataset consisting of various driving conditions is needed. To this end, we present an open driving scenario dataset *DeepScenario*, containing over 30*K* *executable* driving scenarios, which are collected by 2880 test executions of three driving scenario generation strategies. Specifically, Each strategy was set up with three reward functions, *reward-ttc*, *reward-dto*, and *reward-jerk*. We introduced real-world weather data on four different days (i.e., *rain-day*, *rain-night*, *sunny-day*, and *sunny-night*) to simulate various weather conditions and their changes over time. The test executions were conducted on four different roads (i.e., *road1*, *road2*, *road3*, and *road4*). 
Each scenario in the dataset is labeled with six attributes characterizing test results. We further show the attribute statistics and distribution of driving scenarios. For example, there are 1050 collision scenarios, in 917 scenarios there were collisions with other vehicles, 105 and 28 with pedestrians and static obstacles, respectively.

![image](https://github.com/Simula-COMPLEX/DeepScenario/blob/main/figures/dataset-generation-overview.png)

## DeepScenario Dataset Description
*DeepScenario* dataset contains 33530 driving scenarios generated by executing three strategies: (i) *[rl_based-strategy](https://github.com/Simula-COMPLEX/DeepScenario/tree/main/deepscenario-dataset/rl_based-strategy)*, (ii) *[random-strategy](https://github.com/Simula-COMPLEX/DeepScenario/tree/main/deepscenario-dataset/random-strategy)*, and (iii) *[greedy-strategy](https://github.com/Simula-COMPLEX/DeepScenario/tree/main/deepscenario-dataset/greedy-strategy)*, among which 6703 are generated by *rl_based-strategy*, which are less than the number of scenarios generated by *random-strategy* (i.e., 13565) and *greedy-strategy* (i.e., 13262). 

### Dataset Structure
The scenario dataset contains three directories corresponds to three strategies. And each strategy directory is organized following three reward function settings. We show scenario file naming convention and directory strcuture as follows.
```js
.
├── greedy-strategy
│   ├── reward-dto
│   │   ├── road1-rain_day-scenario-attributes.csv
│   │   ├── road1-rain_day-scenarios
│   │   │   ├── 0_scenario_0.deepscenario
│   │   │   ├── 0_scenario_1.deepscenario
│   │   │   ├── 0_scenario_2.deepscenario
│   │   │   ├── ...
│   │   │   ├── 6_scenario_0.deepscenario
│   │   │   ├── 6_scenario_1.deepscenario
│   │   │   ├── 6_scenario_2.deepscenario
│   │   │   ├── ...
│   │   │   ├── 20_scenario_0.deepscenario
│   │   │   ├── 20_scenario_1.deepscenario
│   │   │   ├── 20_scenario_2.deepscenario
│   │   │   ├── ...
│   │   ├── road1-rain_night-scenario-attributes.csv
│   │   ├── road1-rain_night-scenarios
│   │   │   ├── 0_scenario_0.deepscenario
│   │   │   ├── 0_scenario_1.deepscenario
│   │   │   ├── 0_scenario_2.deepscenario
│   │   │   ├── ...
│   │   ├── road1-sunny_day-scenario-attributes.csv
│   │   ├── road1-sunny_day-scenarios
│   │   │   ├── ...
│   │   ├── road1-sunny_night-scenario-attributes.csv
│   │   ├── road1-sunny_night-scenarios
│   │   │   ├── ...
│   │   ├── ...
│   │   ├── road4-rain_day-scenario-attributes.csv
│   │   ├── road4-rain_day-scenarios
│   │   │   ├── ...
│   │   ├── road4-rain_night-scenario-attributes.csv
│   │   ├── road4-rain_night-scenarios
│   │   │   ├── ...
│   │   ├── road4-sunny_day-scenario-attributes.csv
│   │   ├── road4-sunny_day-scenarios
│   │   │   ├── ...
│   │   ├── road4-sunny_night-scenario-attributes.csv
│   │   └── road4-sunny_night-scenarios
│   │   │   ├── ...
│   ├── reward-jerk
│   │   └── ...
│   └── reward-ttc
│   │   └── ...
├── random-strategy
│   ├── reward-dto
│   │   └── ...
│   ├── reward-jerk
│   │   └── ...
│   └── reward-ttc
│   │   └── ...
├── rl_based-strategy
│   ├── ...
└── tree.md
157 directories, 33662 files
```
For example, scenario directory **./greedy-strategy/reward-dto/road1-rain_day-scenarios** contains scenarios generated by executing *greedy-strategy* with test setup *reward-dto*, *road1-rain_day*. The attributes of each scenario are listed in **./greedy-strategy/reward-dto/road1-rain_day-scenario-attributes.csv**.

### Field in Attribute CSV Files

<div class="scrollable-table-wrapper" markdown="block">

| Execution  | ScenarioID | Configuration_API_Description | Attribute[TTC] | Attribute[DTO] | Attribute[Jerk] | Attribute[COL] | Attribute[COLT] |Attribute[SAC]
| ------------- | ------------- | ------------- | ------------- | ------------- | ------------- | ------------- | ------------- | ------------- |
|       0       | 0_scenario_0|A red BoxTruck is overtaking (near) the ego vehicle and maintaining lane.|100000|24.810964|3.4799999999999995|False|None|0|
| ... | ... | ... | ... | ... | ... | ... | ... | ... |
|      18       | 18_scenario_4 |A skyblue SUV is crossing the road (far) and maintaining lane.|100000|1.331153|5.299999999999999|True|pedestrian|2.3469087361531504|
| ... | ... | ... | ... | ... | ... | ... | ... | ... |

</div>

## Maintainers
[@ChengjieLu](https://github.com/chengjie-lu)
